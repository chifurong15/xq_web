<div ng-controller="eventBacklog">
    <div class="bg-light lter b-b wrapper-md">
        <h1 class="m-n font-thin h3">待办问题</h1>
    </div>
    <div class="wrapper-md">
        <div class="panel panel-default m-all-0">
            <div class="panel-body">
                <form method="get">
                    <div class="form-inline">
                        <div class="form-item">
                            <label>问题来源</label>
                            <select class="form-control select-short" ng-change="selectChange();"
                                    ng-model="eventResource">
                                <option value="A">河长APP</option>
                                <option value="B">电话上报</option>
                                <option value="C">公众APP</option>
                                <option value="D">微信</option>
                                <option value="F">曝光台</option>
                                <option value="G">钉钉平台</option>
                            </select>
                        </div>
                        <div class="form-item">
                            <label>问题等级</label>
                            <select class="form-control select-short" ng-change="selectChange();" ng-model="eventLevel">
                                <option value="0">一般</option>
                                <option value="1">紧急</option>
                                <option value="2">特急</option>
                            </select>
                        </div>
                        <div class="form-item">
                            <div class="form-item">
                            <label>问题类型</label>
                            <input type="text" class="form-control input-short-o" ng-model="eventTypeName"/>
                            <a data-toggle="modal" data-target="#eventTypeModal" class="input-group-addon"><i
                                    class="fa fa-search"></i></a>
                        </div>
                        </div>
                        <div class="form-group" style="min-width: 290px;margin: 5px 0;padding-right: 15px;">
                            <label style="width: 90px;padding: 5px;">开始时间</label>
                            <div class="input-group date date_picker" id="beginTime">
                                <input type="text" class="form-control input-short-o" ng-model="beginTime"/>
                                <span class="input-group-addon" style="padding: 6px 9px;">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </div>
                        </div>
                        <div class="form-group" style="min-width: 290px;margin: 5px 0;padding-right: 15px;">
                            <label style="width: 90px;padding: 5px;">结束时间</label>
                            <div class="input-group date date_picker" id="endTime">
                                <input type="text" class="form-control input-short-o" ng-model="endTime"/>
                                <span class="input-group-addon" style="padding: 6px 9px;">
                                    <i class="fa fa-calendar"></i>
                                </span>
                            </div>
                        </div>
                        <div class="form-item">
                            <label>问题内容</label>
                            <input type="text" class="form-control input-short" ng-model="eventContent"/>
                        </div>
                        <div class="form-item">
                            <label>事发区域</label>
                            <input type="text" class="form-control input-short-o" ng-model="eventRegion"/>
                            <a data-toggle="modal" data-target="#myModal" class="input-group-addon"><i
                                    class="fa fa-search"></i></a>
                        </div>
                        <div class="form-item">
                            <label>问题状态</label>
                            <select class="form-control select-short" ng-change="selectChange();" ng-model="status">
                                <option value="1">处理中</option>
                                <option value="2">已结案</option>
                            </select>
                        </div>
                        <div class="form-item">
                            <label>上报号码</label>
                            <input type="text" class="form-control input-short" ng-model="eventTel"/>
                        </div>
                        <button type="submit" ng-click="searchData()" class="btn btn-primary">
                            <i class="fa fa-search"></i>搜索
                        </button>
                    </div>
                </form>
            </div>
        </div>
        <div class="panel panel-default">
            <div class="panel-body">
                <div class="table-responsive">
                    <table class="table table-bordered table-hover" data-filter="#filter">
                        <tr>
                            <th>到达时间</th>
                            <th>问题来源</th>
                            <th>问题等级</th>
                            <th>发现时间</th>
                            <th>问题内容</th>
                            <th>行政区域</th>
                            <th>问题状态</th>
                        </tr>
                        <tr ng-repeat="module in moduleList" ng-init="index=$index+1" ng-click="eventDetail(module.id)"
                            style="cursor:pointer;">
                            <td>{{module.arrivalTime}}</td>
                            <td>{{reportRes(module.eventresource)}}</td>
                            <td>{{evLevel(module.eventlevel)}}</td>
                            <td>{{module.createtime}}</td>
                            <td>{{module.content}}</td>
                            <td>{{module.eventbelongprovince + module.eventbelongcity + module.eventbelongcounty + module.eventbelongtown + module.eventbelongvillage}}</td>
                            <td>{{statusEvent(module.status)}}</td>
                        </tr>
                    </table>

                </div>
                <tm-pagination conf="paginationConf"></tm-pagination>
            </div>
        </div>
        <div class="modal fade" id="eventTypeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">选择问题类型</h4>
                    </div>
                    <div class="modal-body">
                        <ul id="typeTree" class="ztree"></ul>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title" id="myModalLabel">选择区域</h4>
                    </div>
                    <div class="modal-body">
                        <my-tree></my-tree>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
