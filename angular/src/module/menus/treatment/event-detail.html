<div ng-controller="eventDetail" ng-init="init()" style="height: calc(100vh - 50px);">
    <div class="bg-light lter b-b wrapper-md">
        <h1 class="m-n font-thin h3">问题详情</h1>
    </div>
    <div class="wrapper-md">
        <div class="panel panel-default m-all-0">
            <div class="panel-body">
                <div class="search-form" style="padding-right: 340px;">
                    <form class="form-inline" method="get">
                        <div class="form-item">
                            <label>问题编号</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.serialno" readonly/>
                        </div>
                        <div class="form-item">
                            <label>问题类型</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.typename" readonly/>
                        </div>
                        <div class="form-item">
                            <label>问题等级</label>
                            <input type="text" class="form-control input-short" ng-model="eventLevel" readonly/>
                        </div>
                        <div class="form-item">
                            <label>问题来源</label>
                            <input type="text" class="form-control input-short" ng-model="recource" readonly/>
                        </div>
                    </form>
                    <form class="form-inline" method="get">
                        <div class="form-item">
                            <label>问题内容</label>
                            <textarea class="form-control textarea-long" rows="4" ng-model="detailData.content"
                                      readonly></textarea>
                        </div>
                    </form>
                    <form class="form-inline" method="get">
                        <div class="form-item">
                            <label>事发地</label>
                            <input type="text" class="form-control input-long" ng-model="detailData.address" readonly/>
                        </div>
                    </form>
                    <form class="form-inline" method="get">
                        <div class="form-item">
                            <label>事发时间</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.createtime"
                                   value="2017-12-06 08:07:08"/>
                        </div>
                        <div class="form-item">
                            <label>上报人</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.reportperson" value="detailData.reportperson"
                                   readonly/>
                        </div>
                        <div class="form-item">
                            <label>上报时间</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.reporttime"
                                   value="2017-12-06 08:07:08"/>
                        </div>
                        <div class="form-item">
                            <label>联系方式</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.reportphone" value=""/>
                            <span class="required">*</span>
                        </div>
                        <div class="form-item">
                            <label>受理人员</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.acceptperson" readonly/>
                        </div>
                        <div class="form-item">
                            <label>水系名称</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.eventbasinname"/>
                        </div>
                        <div class="form-item">
                            <label>河流名称</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.eventrivername"/>
                        </div>
                        <div class="form-item">
                            <label>河道名称</label>
                            <input type="text" class="form-control input-short" ng-model="detailData.eventreachname"/>
                        </div>
                    </form>
                    <div class="form-inline">
                        <div class="form-item" style="min-width: 350px;">
                            <label>处理前图片</label>
                            <div id="layer-photos-before" class="layer-photos-demo" style="margin-left: 30px;max-width: 600px;" ng-show="beforeAccessory">
                                <img style="margin: 0 5px;" ng-repeat="item in beforeAccessory" layer-pid="" layer-src="{{eventImgUrl}}{{item.accessoryurl}}" src="{{eventImgUrl}}{{item.accessoryurl}}" alt="处理前图片" width="60px" height="60px">
                            </div>
                        </div>
                    </div>
                    <div class="form-inline">
                        <div class="form-item" style="min-width: 350px;">
                            <label>处理后图片</label>
                            <div id="layer-photos-later" class="layer-photos-demo" style="margin-left: 30px;max-width: 600px;" ng-show="afterAccessory">
                                <img style="margin: 0 5px;" ng-repeat="item in afterAccessory" layer-pid="" layer-src="{{eventImgUrl}}{{item.afterAccessory}}" src="{{eventImgUrl}}{{item.accessoryurl}}" alt="处理后图片" width="60px" height="60px">
                            </div>
                        </div>
                    </div>
                    <div class="form-item">
                        <label style="width: auto">说明:上报电话请填写手机号码或者座机号码，联系方式无限制</label>
                    </div>
                    <div class="basin_map" id="mapContainer" style="position: absolute;top: 100px;right: 30px;width: 320px;height: 240px;
                    border: 1px solid #cfdadd;
                    background: #eee;
                    z-index: 0;">
                        <!--<div class="proMgr-map-tool">
                            <ul class="drawTool">
                                <li ng-click="doDraw();">
                                    <a id="doDraw" href="javascript:void(0);" title="画面"><i class="fa fa-pencil"></i></a>
                                </li>
                                <li ng-click="clearDraw();">
                                    <a id="clearDraw" href="javascript:void(0);" title="清除"><i class="fa fa-ban"></i></a>
                                </li>
                                <li ng-click="mapExpand();">
                                    <a id="mapExpand"  href="javascript:void(0);" title="缩放"><i class="fa" ng-class="{true : 'fa-expand',false : 'fa-compress' }[switchMapIcon]"></i></a>
                                </li>
                            </ul>
                        </div>-->
                    </div>

                </div>
            </div>
        </div>

        <div class="panel panel-default">
            <div class="panel-body">
                <div class="table-responsive">
                    <h4>处理状况<span class="badge">4</span></h4>
                    <table class="table table-bordered table-hover" data-filter="#filter">
                        <tr>
                            <th>到达时间</th>
                            <th>问题状态</th>
                            <th>处理人</th>
                            <th>处理内容</th>
                            <th>处理时间</th>
                            <th>处理时长(小时)</th>
                        </tr>
                        <tr ng-repeat="module in workTakeList" ng-init="index=$index+1" style="cursor:pointer;">
                            <td>{{module.taskCreateTime}}</td>
                            <td>{{module.taskName}}</td>
                            <td>{{module.handler}}</td>
                            <td>{{module.taskComment}}</td>
                            <td>{{module.taskEndTime}}</td>
                            <td>{{module.handlerTime}}</td>
                        </tr>
                    </table>

                </div>
            </div>

            <div class="panel panel-default">
                <div class="panel-body">
                    <ul class="tabs-list" id="tabs">
                        <li ng-repeat="(ind,item) in workTypeList" ng-class="ind == 0? 'select': ''" ng-click="btnClick(item,ind)"><a>{{workTypeTurn(item)}}</a></li>
                    </ul>
                    <div class="tab-content" id="tabs-con">
                        <div class="tab-con" style="display: block">
                            <!-- <form class="form-inline" method="get">
                                <div class="form-item">
                                    <input type="radio" name="iCheck" checked ng-click="selectSenderType(0)"><span>根据人员派单</span>
                                    <input type="radio" name="iCheck" ng-click="selectSenderType(1)"><span>根据区域派单</span>
                                    <input type="radio" name="iCheck" ng-click="selectSenderType(2)"><span>根据河道派单</span>
                                </div>
                            </form> -->
                            <form class="form-inline" method="get" ng-show="typeModule == 'sendOrder' || typeModule == 'delegate'">
                                <div class="form-item" ng-if="commendName == '委办'">
                                    <label>选择区域</label>
                                    <select  ng-model="choseRegion" class="form-control select-short" ng-change="selectRegion(choseRegion, '')">
                                        <option value="0" ng-show="areaWb">上级委办</option>
                                        <option value="1">本级委办</option>
                                    </select>
                                </div>
                                <div class="form-item" ng-if="commendName == '派单'">
                                    <label>选择区域</label>
                                    <select  ng-model="senderRegion" ng-options="item.name for item in regionList" class="form-control select-short" ng-change="selectRegion('',senderRegion)">
                                    </select>
                                </div>
                                <div class="form-item">
                                    <label>选择人员</label>
                                    <select  ng-model="chosePerson" ng-options="item.name for item in personList" class="form-control select-short" ng-change="selectPerson(chosePerson.id)"></select>
                                    <span class="required">*</span>
                                </div>
                            </form>
                            <form class="form-inline" method="get" ng-show="moudleLength>0">
                                <div class="form-item">
                                    <label>{{commendName}}意见</label>
                                    <textarea class="form-control textarea-long" rows="4"
                                              ng-model="sendDescription"></textarea>
                                </div>
                            </form>
                            <div class="btn-box">
                                <button type="submit" class="btn btn-primary" ng-show="moudleLength>0" ng-click="certainClick()"><i
                                        class="fa fa-plus"></i>确认
                                </button>
                                <button type="submit" class="btn btn-default" ng-click="back()"><i
                                        class="fa fa-ban"></i>取消
                                </button>
                            </div>
                        </div>
                    </div>
                    <script type="text/javascript">
                        $('#tabs li').click(function () {
                            var i = $(this).index();
                            $(this).addClass('select').siblings().removeClass('select');
                            $('#tabs-con .tab-con').eq(i).show().siblings().hide();
                        });
                    </script>
                </div>

            </div>
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                            <h4 class="modal-title" id="myModalLabel">选择区域</h4>
                        </div>
                        <div class="modal-body">
                            <my-tree></my-tree>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script>
    layui.use('layer', function() {
        layer.photos({
            photos: '#layer-photos-before'
            ,anim: 5 //0-6的选择，指定弹出图片动画类型，默认随机（请注意，3.0之前的版本用shift参数）
        });
    });
    layui.use('layer', function() {
        layer.photos({
            photos: '#layer-photos-later'
            ,anim: 5 //0-6的选择，指定弹出图片动画类型，默认随机（请注意，3.0之前的版本用shift参数）
        });
    });

</script>